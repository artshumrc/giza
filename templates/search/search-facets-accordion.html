{% if search.facets.all_facets|length %}
  <ul class="vertical menu accordion-menu" data-accordion-menu data-multi-open="false">
    {% for type, subfacets in search.facets.all_facets.items %}
      {% if '_daterange' not in type and 'Codes' not in type and 'Paths' not in type and subfacets|length %}
        <li>
          <a href='#'>
            <h6 class="search-facet-title">{{ type }}:</h6>
            <ul class="menu vertical nested" data-multi-open="false"> 
              {% for facet in subfacets %}
                {% if "null" != facet.display_text.lower %}
                  <a href='#'>
                    <li class="search-facet-item {% if facet.selected %}is-active{% endif %}">
                      <input type="checkbox" class="facet_checkbox" id="{{ search.category }}_{{ type }}_{{ facet.display_text }}" name="{{ type }}_{{ facet.display_text }}" {% if facet.selected %} checked {% endif %} onclick="toggle_facet('{{ type }}_{{ facet.display_text }}')">
                      <label for="{{ search.category }}_{{ type }}_{{ facet.display_text }}">{{ facet.display_text }} ({{ facet.doc_count }})</label>
                    </li>
                  </a>
                {% endif %}
              {% endfor %}
            </ul>
          </a>        
        </li>
      {% elif "_daterange" in type and subfacets|length > 1 %}
      <li>
        <a href="#">
          <div class="search-facet-section">
          <fieldset>
            <legend class="search-facet-title">{{ type|slice:":-10" }}</legend>
            <p>
              <label for="date_slider_from">From:<span id="date_slider_from"></span></label>
              <label for="date_slider_to">To:<span id="date_slider_to"></span></label>
              <input type="hidden" id="date_start">
              <input type="hidden" id="date_end">
            </p>
            <div id="slider-range"></div>
          </fieldset>
        </div>
        </a>
      </li>
      {% endif %}
    {% endfor %}
  </ul>
{% endif %}